<!DOCTYPE html>
<html>
<head>
    <title>Submit New Task</title>
</head>
<body>
    <h1>Submit New Task</h1>
    <form id="task-form" method="POST" action="{{url_for('Todo.submit_task_api')}}", onsubmit="event.preventDefault(); submitTask(event)">
        <label for="description">Task Description:</label><br>
        <input type="text" id="description" name="description" required><br>
        <input type="submit" value="Submit">
    </form>
    <!-- Button to navigate back to home -->
    <button onclick="location.href='{{url_for('Todo.empty_request')}}'" type="button">Back to Home</button>
    <script>
        async function submitTask(e) {
            savedE = e
            console.log(e)
            const form = e.target;
            const formData = new FormData(form);
            const response = await fetch(form.action, {
                method: form.method,
                body: formData
            })
            if (!response.ok){
                alert('failed to submit task');
            }
            else form.reset();
        }
    </script>
</body>
</html>
